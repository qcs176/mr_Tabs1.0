# mr_Tabs 项目说明

`mr_Tabs` 是一个基于 Chromium 扩展规范（Manifest V3）的新标签页扩展项目，目标运行环境为 Edge/Chrome。

## 项目目标
- 替换浏览器默认新标签页。
- 提供可切换搜索引擎的搜索区域。
- 支持本地背景图上传与持久化。
- 支持浅色/深色模式切换与持久化。
- 提供可扩展的右侧设置面板，便于持续迭代。

## 当前已实现能力
- 新标签页覆盖：通过 `chrome_url_overrides.newtab` 指向自定义页面。
- 搜索能力：支持 Google/Bing/Baidu/Yandex 搜索跳转。
- 搜索引擎选择：使用自定义下拉菜单，支持图标与名称展示。
- 搜索栏结构：搜索引擎、输入框、搜索按钮已整合为一体化组件，内部细线分隔。
- 搜索按钮样式：按钮已融入搜索栏，采用小圆角矩形，悬停时颜色微变暗。
- 背景管理：支持本地上传背景图、清除背景，并持久化存储。
- 主题切换：浅/暗模式切换动画与状态持久化。
- 设置面板：右侧弹出、可拖拽宽度；采用左侧目录 + 右侧内容布局。
- 语言切换：支持简体中文与英文切换，并持久化。
- 暗色背景修复：已修复暗色模式下背景比例异常与重复平铺问题。

## 项目结构
- `manifest.json`：扩展清单配置（MV3）。
- `newtab.html`：新标签页主结构。
- `styles/main.css`：全局样式、主题样式、布局与组件样式。
- `scripts/config.js`：搜索引擎与默认状态配置。
- `scripts/storage.js`：基于 `chrome.storage.local` 的状态读写封装。
- `scripts/newtab.js`：页面交互逻辑（搜索、主题、设置、语言、背景等）。
- `work_plan.md`：需求与阶段性执行计划。
- `task_work.md`：当前任务与完成记录。

## 关键状态持久化字段
- `engine`：当前搜索引擎。
- `theme`：当前主题（light/dark）。
- `backgroundDataUrl`：背景图片数据。
- `language`：语言设置（zh-CN/en）。
- `settingsWidth`：设置面板宽度。
- `settingsTab`：设置页当前目录页签。

## 已完成阶段总结
- 第一阶段：扩展基础搭建与核心功能（搜索、背景、主题、设置）完成。
- 第二阶段：页面视觉优化（玻璃质感、图标化交互）完成。
- 第三阶段：结构与交互增强（设置分层、可拉伸、搜索区重构）完成。
- 第四阶段：视觉与布局修正（两栏设置布局、暗色可读性、圆润化）完成。
- 第五阶段：暗色背景异常问题修复完成。
- 第六阶段：搜索按钮融合式改造完成。

## 本地加载方式（Edge）
1. 打开 `edge://extensions`。
2. 开启“开发者模式”。
3. 点击“加载已解压的扩展程序”。
4. 选择本项目根目录。

## 下次对话建议入口
为便于快速继续开发，建议下次优先查看：
1. `task_work.md`（当前待办）
2. `work_plan.md`（需求与阶段）
3. `scripts/newtab.js`（主要交互逻辑）
4. `styles/main.css`（视觉与布局实现）
